<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.7. External Interface &#8212; MCAF R6 RC8 documentation (docver 6.0.2)</title>
    <link rel="stylesheet" href="../_static/microchip.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/mcaf_doc.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/svgcrop.js"></script>
    <script type="text/javascript" src="../_static/mcaf-styling.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js"></script>
    <script type="text/javascript" src="../_static/rendermath.js"></script>
    
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.8. Diagnostic Kernel" href="diagnostics.html" />
    <link rel="prev" title="4.6. Supervisory Algorithms" href="supervisory.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="diagnostics.html" title="4.8. Diagnostic Kernel"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="supervisory.html" title="4.6. Supervisory Algorithms"
             accesskey="P">previous</a> |</li>
    <li><img class="nav-logo"
             src="../_static/Microchip-Logo-Horizontal-White-Red-120x28.png" alt=""
        /></li>
    <li><a href=""></a> &#187;</li>
    <a href="../index.html">MCAF R6 RC8 (docver 6.0.2)</a> &#187;
    
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">4. Components</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="external-interface">
<span id="ext-interface"></span><h1>4.7. External Interface<a class="headerlink" href="#external-interface" title="Permalink to this headline">¶</a></h1>
<p>This section describes the external interfaces to the motor control application
framework, including potentiometer, pushbuttons, and LEDs.</p>
<p>In MCAF R6, user interfaces for the potentiometer and pushbuttons are implemented
by the <a class="reference internal" href="main.html#sample-application"><span class="std std-ref">Sample Application</span></a> within the <a class="reference internal" href="main.html#component-main"><span class="std std-ref">Main Application</span></a> component.</p>
<div class="section" id="general-ui-guidelines">
<h2>4.7.1. General UI guidelines<a class="headerlink" href="#general-ui-guidelines" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://www.microchip.com/DevelopmentTools/ProductDetails/dm330021-2">dsPICDEM<sup>®</sup> MCLV‑2 Development Board</a>
and the <a class="reference external" href="http://www.microchip.com/Developmenttools/ProductDetails.aspx?PartNO=DV330100">Low Voltage Bundle</a>
have (per motor) two LEDs, two pushbuttons, and one
potentiometer.
The <a class="reference external" href="https://www.microchip.com/DevelopmentTools/ProductDetails/dm330023-2">dsPICDEM<sup>®</sup> MCHV‑2 Development Board</a> and <a class="reference external" href="https://www.microchip.com/DevelopmentTools/ProductDetails/dm330023-3">dsPICDEM<sup>®</sup> MCHV‑3 Development Board</a> have two LEDs, one pushbutton, and one potentiometer for its
single motor. The LEDs in MCLV-2 and the Low Voltage Bundle are located next to each other; the
LEDs in MCHV-2 and MCHV-3 are located several inches apart on opposite sides of the <a class="reference internal" href="../appendix/glossary.html#term-pim"><span class="xref std std-term">PIM</span></a>. In
order to support all these systems, the following guidelines are suggested.</p>
<ul class="simple">
<li>Pushbuttons<ul>
<li>The primary pushbutton should provide required functionality.</li>
<li>The secondary pushbutton should provide optional functionality.</li>
<li>Each pushbutton can provide different types of inputs depending on the duration of press and release:<ul>
<li>debounce: release → press and press → release transitions occur in less than some time T1 (e.g. 20msec). This is ignored.</li>
<li>single press: release → press and press → release transitions occur in some time T where T1 ≤ T ≤ T2</li>
<li>sustained press: release → press transition occurs, and press is held
for more than some time T2 (e.g. 2 seconds). This is available for
providing seldom-used input. Once a time T2 has elapsed, if a sustained
press is allowed, an LED will provide some type of visual feedback that a
sustained press has occurred.</li>
<li>double press: two single press events occur within some interval T3 (e.g. 0.5 seconds). This is available for providing seldom-used input.</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="simple" id="ext-interface-leds">
<li>LEDs<ul>
<li>Each LED can provide different types of indication depending on how it is energized over time:<ul>
<li>Fully off</li>
<li>Fully on</li>
<li>Modulated at high frequency (&gt;100 Hz) in order to operate at ½
perceived brightness. (NOTE: because of the quirks of the human brain, this may not be at 50% duty cycle.)</li>
<li>Perceptible blink rates and duty cycles (e.g. 5%/50%/95% duty at 0.5 / 1 / 2Hz blink rates)</li>
<li>Blink rates between 2Hz and 55Hz should be avoided: although LEDs are fairly
small in visual extent, these frequencies can be a trigger to people who have photosensitive epilepsy.</li>
<li>Error codes — sequences of on/off patterns that are repeated and easily
perceptible, e.g. 250msec on-time separated by different-length delimiting
spaces of off-time (250msec, 750msec, 2250msec); see section on <a class="reference internal" href="#ui-error-codes"><span class="std std-ref">error codes</span></a> for more
information</li>
</ul>
</li>
<li>Some coordination between the two LEDs should be maintained to provide
simple visual information (it is difficult to interpret two LEDs blinking at
different rates next to each other)</li>
<li>For indicating “liveness”, dynamic patterns should be preferred over static patterns, to indicate that the controller is alive and not stuck in a particular state.</li>
</ul>
</li>
<li>Potentiometer<ul>
<li>The potentiometer should only represent a continuous range input.</li>
</ul>
</li>
</ul>
<p>Aside from these general guidelines, the choice of UI behavior is somewhat arbitrary.</p>
</div>
<div class="section" id="required-features">
<h2>4.7.2. Required Features<a class="headerlink" href="#required-features" title="Permalink to this headline">¶</a></h2>
<p>The following are required features:</p>
<ul class="simple">
<li>[LED] Continuous indication of system state (e.g. disabled/startup/running/shutdown/fault)</li>
<li>[LED] Error code indicator in fault state</li>
<li>[button] Start/stop control</li>
<li>[button] Manual restart from fault</li>
<li>[potentiometer] Velocity control in a given direction, from low to high magnitude (speed)</li>
</ul>
<p>The following are desired features:</p>
<ul class="simple">
<li>[button] Control direction of velocity command (forward / reverse)</li>
</ul>
</div>
<div class="section" id="implemented-behavior">
<h2>4.7.3. Implemented Behavior<a class="headerlink" href="#implemented-behavior" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Start/stop:<ul>
<li>Single press events on primary button provide a “start” and “stop” input.
(request to start motor if it is stopped; request to stop motor if it is not stopped)
This was done to be consistent with the behavior of existing application notes AN1078 and AN1292.</li>
</ul>
</li>
<li>Reverse direction:<ul>
<li>Direction flag is maintained</li>
<li>Reverse direction request:<ul>
<li>If 2nd button is present: single press event of 2nd button</li>
<li><dl class="first docutils">
<dt>If 2nd button is not present: sustained press of first button, first supported in MCAF R2.</dt>
<dd>The time needed for this is nominally 3 seconds, set by <code class="docutils literal notranslate"><span class="pre">MCAF_BOARDSERVICE_ISR_PRESCALER</span></code> in <code class="docutils literal notranslate"><span class="pre">board_service_types.h</span></code>
and <code class="docutils literal notranslate"><span class="pre">BSP_EMULATED_BUTTON_DELAY_COUNT</span></code> in <code class="docutils literal notranslate"><span class="pre">hardware_access_functions_params.h</span></code>, along with the motor control loop frequency.
(see <a class="reference internal" href="#ext-interface-errata"><span class="std std-ref">errata</span></a>)</dd>
</dl>
</li>
</ul>
</li>
<li>If reverse direction request occurs when motor is stopped, direction flag is reversed but no other action is taken.</li>
<li>If reverse direction request occurs when motor is running, then the following sequence occurs:<ul>
<li>Request to stop motor</li>
<li>Motor reaches a stopped state</li>
<li>Direction flag reversed</li>
<li>Request to start motor</li>
</ul>
</li>
</ul>
</li>
<li>Manual restart from a recoverable fault (see <a class="reference internal" href="#table-ui-error-recoverability"><span class="std std-numref">Table 4.6</span></a>):<ul>
<li>Single press event, if in fault state, clears fault latch and restarts normal operation.</li>
</ul>
</li>
<li>Velocity control:<ul>
<li>Potentiometer adjusts magnitude of velocity (speed) from minimum to maximum. Same as behavior of existing appnotes.</li>
</ul>
</li>
<li>State indication: see table below</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="25%" />
<col width="29%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">direction</th>
<th class="head">state</th>
<th class="head">LED1</th>
<th class="head">LED2</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>both</td>
<td><code class="docutils literal notranslate"><span class="pre">RESTART</span></code></td>
<td>off</td>
<td>off</td>
</tr>
<tr class="row-odd"><td>forward</td>
<td><code class="docutils literal notranslate"><span class="pre">STOPPED</span></code></td>
<td>off</td>
<td>1/16 s on &#64; 1Hz</td>
</tr>
<tr class="row-even"><td>forward</td>
<td><code class="docutils literal notranslate"><span class="pre">STARTING</span></code></td>
<td>on</td>
<td>1/16 s on &#64; 1Hz</td>
</tr>
<tr class="row-odd"><td>forward</td>
<td><code class="docutils literal notranslate"><span class="pre">RUNNING</span></code></td>
<td>on</td>
<td>15/16 s on &#64; 1Hz</td>
</tr>
<tr class="row-even"><td>forward</td>
<td><code class="docutils literal notranslate"><span class="pre">STOPPING</span></code></td>
<td>off</td>
<td>15/16 s on &#64; 1Hz</td>
</tr>
<tr class="row-odd"><td>reverse</td>
<td><code class="docutils literal notranslate"><span class="pre">STOPPED</span></code></td>
<td>1/16 s on &#64; 1Hz</td>
<td>off</td>
</tr>
<tr class="row-even"><td>reverse</td>
<td><code class="docutils literal notranslate"><span class="pre">STARTING</span></code></td>
<td>1/16 s on &#64; 1Hz</td>
<td>on</td>
</tr>
<tr class="row-odd"><td>reverse</td>
<td><code class="docutils literal notranslate"><span class="pre">RUNNING</span></code></td>
<td>15/16 s on &#64; 1Hz</td>
<td>on</td>
</tr>
<tr class="row-even"><td>reverse</td>
<td><code class="docutils literal notranslate"><span class="pre">STOPPING</span></code></td>
<td>15/16 s on &#64; 1Hz</td>
<td>off</td>
</tr>
<tr class="row-odd"><td>both</td>
<td><code class="docutils literal notranslate"><span class="pre">TEST_DISABLED</span></code></td>
<td>1/16 s on &#64; 1Hz</td>
<td>1/16 s on &#64; 1Hz</td>
</tr>
<tr class="row-even"><td>both</td>
<td><code class="docutils literal notranslate"><span class="pre">TEST_ENABLED</span></code></td>
<td>15/16 s on &#64; 1Hz</td>
<td>15/16 s on &#64; 1Hz</td>
</tr>
<tr class="row-odd"><td>both</td>
<td><code class="docutils literal notranslate"><span class="pre">FAULT</span></code></td>
<td>error code blink</td>
<td>error code blink</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="error-codes">
<span id="ui-error-codes"></span><h2>4.7.4. Error Codes<a class="headerlink" href="#error-codes" title="Permalink to this headline">¶</a></h2>
<p>The MCAF has fault detection logic to cover a number of different conditions
and summarize as a unique fault code. The MCAF displays this fault code as
a blinking LED pattern based on groups of 1-4 blinks. The rationale for this
approach is that blink counts greater than 4 are difficult to count.</p>
<div class="section" id="error-code-led-behavior">
<h3>4.7.4.1. Error Code LED Behavior<a class="headerlink" href="#error-code-led-behavior" title="Permalink to this headline">¶</a></h3>
<div class="section" id="converting-error-code-to-led-blink-pattern">
<h4>4.7.4.1.1. Converting Error Code to LED Blink Pattern<a class="headerlink" href="#converting-error-code-to-led-blink-pattern" title="Permalink to this headline">¶</a></h4>
<p>Given a positive (nonzero) integer X which represents an error code, and an LED that can be turned on:</p>
<ol class="arabic simple">
<li>Convert X to a sequence of base 4 digits, least significant digit first, ending in the last nonzero digit.</li>
<li>Add 1 to each value in the sequence.</li>
<li>For each value <em>k</em> in the sequence:<ol class="loweralpha">
<li>Repeat <em>k</em> times:<ol class="lowerroman">
<li>Turn LED on for 250msec</li>
<li>Turn LED off for 250msec</li>
</ol>
</li>
<li>Wait 500 msec</li>
</ol>
</li>
<li>Wait 1500 msec, then goto step 3</li>
</ol>
<p>This always produces a sequence containing at least one double/triple/quadruple blink.</p>
</div>
<div class="section" id="converting-led-blink-pattern-to-error-code">
<h4>4.7.4.1.2. Converting LED Blink Pattern to Error Code<a class="headerlink" href="#converting-led-blink-pattern-to-error-code" title="Permalink to this headline">¶</a></h4>
<p>This is not usually necessary (error code tables include a column indicating
the number of blinks directly), but to convert back to a numeric error code:</p>
<ol class="arabic simple">
<li>Count the number of blinks as a sequence of numbers from 1-4</li>
<li>Subtract 1 from each value in the sequence</li>
<li>Interpret the sequence as a base 4 number, least significant digit first</li>
</ol>
</div>
<div class="section" id="examples">
<h4>4.7.4.1.3. Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p>The examples below include a visual representation of a blink pattern. Each of the <code class="docutils literal notranslate"><span class="pre">+</span></code> symbols represents
the LED turning on, and the pattern is drawn to scale in time (each character represents 250msec).</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="23%" />
<col width="11%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Error code</th>
<th class="head">Sequence of base 4 digits</th>
<th class="head"><em>k</em> sequence</th>
<th class="head">two repetitions of blink pattern</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>[1]</td>
<td>[2]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </code></td>
</tr>
<tr class="row-odd"><td>2</td>
<td>[2]</td>
<td>[3]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </code></td>
</tr>
<tr class="row-even"><td>3</td>
<td>[3]</td>
<td>[4]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </code></td>
</tr>
<tr class="row-odd"><td>4</td>
<td>[0, 1]</td>
<td>[1, 2]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </code></td>
</tr>
<tr class="row-even"><td>7</td>
<td>[3, 1]</td>
<td>[4, 2]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </code></td>
</tr>
<tr class="row-odd"><td>13</td>
<td>[1, 3]</td>
<td>[2, 4]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </code></td>
</tr>
<tr class="row-even"><td>35</td>
<td>[3, 0, 2]</td>
<td>[4, 1, 3]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160; </code></td>
</tr>
<tr class="row-odd"><td>100</td>
<td>[0, 1, 2, 1]</td>
<td>[1, 2, 3, 2]</td>
<td><code class="docutils literal notranslate"><span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span>&#160;&#160; <span class="pre">+</span> <span class="pre">+</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="timing-and-fault-clearing-issues-in-ui-indicators">
<span id="ui-timing-faultclear"></span><h2>4.7.5. Timing and Fault-Clearing Issues in UI Indicators<a class="headerlink" href="#timing-and-fault-clearing-issues-in-ui-indicators" title="Permalink to this headline">¶</a></h2>
<p>There are two associated issues that are indirectly related to error-code reporting:</p>
<ul class="simple">
<li>timing of UI indicators (how delays are implemented)</li>
<li>fault-clearing issues (what has to happen in order for the system to return to normal operation)</li>
</ul>
<p>The MCAF uses chosen the following strategy, based on recoverability:</p>
<span id="table-ui-error-recoverability"></span><table border="1" class="docutils" id="id2">
<caption><span class="caption-number">Table 4.6 </span><span class="caption-text">Error recoverability</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="31%" />
<col width="37%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">recoverability</th>
<th class="head">timing</th>
<th class="head">fault-clearing</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Recoverable</strong>: faults expected to be
caused by a momentary condition:
overcurrent, overspeed, overvoltage,
etc.</td>
<td>We rely on the system state machine
running at a periodic rate as a
timebase for UI delays.</td>
<td>User intervention required:
press the start/stop input button.</td>
</tr>
<tr class="row-odd"><td><strong>Nonrecoverable</strong>: something really
bad has happened, such as an
oscillator failure, stack overflow,
or watchdog timeout.</td>
<td>We cannot necessarily rely on the
system state machine operating
properly, and instead go into a
“paranoid” mode (see below); busy-waiting
for a fixed number of CPU cycles is used for
timing.</td>
<td>User intervention via a manual reset
is required.</td>
</tr>
</tbody>
</table>
<p>Upon nonrecoverable faults (“paranoid mode”), the following actions occur:</p>
<ul class="simple">
<li>Disable all interrupts</li>
<li>Put <a class="reference internal" href="../appendix/glossary.html#term-pwm"><span class="xref std std-term">PWM</span></a> outputs at a safe state</li>
<li>Report error code via LEDs, relying on busy-waiting to create time delays for UI</li>
</ul>
</div>
<div class="section" id="implementation">
<h2>4.7.6. Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="external-interface-errata">
<span id="ext-interface-errata"></span><h3>4.7.6.1. External interface errata<a class="headerlink" href="#external-interface-errata" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>LED patterns are not displayed when in the <code class="docutils literal notranslate"><span class="pre">TEST_DISABLE</span></code> or <code class="docutils literal notranslate"><span class="pre">TEST_ENABLE</span></code> states. (DB_MC-1922;
Applicability: MCAF R1 – R5.)</li>
<li>Timing of emulated button press for MCHV-2 and MCHV-3 are not guaranteed; if there are long-running tasks within the main loop,
this can delay the time needed to detect an extended button press. (DB_MC-1920; Applicability: MCAF R2, R3.)</li>
</ul>
</div>
<div class="section" id="modules">
<h3>4.7.6.2. Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h3>
<span id="index-0"></span><table border="1" class="components-table docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="29%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Module</th>
<th class="head">Files</th>
<th class="head">Description</th>
<th class="head">Comments</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="first last docutils literal notranslate"><span class="pre">error_codes</span></code></td>
<td class="longcolumn-1"><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">error_codes.h</span></code></div>
</div>
</td>
<td>List of all error codes</td>
<td>The Appendix contains <a class="reference internal" href="../appendix/error_codes.html#appendix-error-codes"><span class="std std-ref">an annotated list of error codes</span></a></td>
</tr>
<tr class="row-odd"><td><code class="first last docutils literal notranslate"><span class="pre">ui</span></code></td>
<td><div class="first last line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">ui.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ui.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ui_types.h</span></code></div>
</div>
</td>
<td>User interface</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4.7. External Interface</a><ul>
<li><a class="reference internal" href="#general-ui-guidelines">4.7.1. General UI guidelines</a></li>
<li><a class="reference internal" href="#required-features">4.7.2. Required Features</a></li>
<li><a class="reference internal" href="#implemented-behavior">4.7.3. Implemented Behavior</a></li>
<li><a class="reference internal" href="#error-codes">4.7.4. Error Codes</a><ul>
<li><a class="reference internal" href="#error-code-led-behavior">4.7.4.1. Error Code LED Behavior</a><ul>
<li><a class="reference internal" href="#converting-error-code-to-led-blink-pattern">4.7.4.1.1. Converting Error Code to LED Blink Pattern</a></li>
<li><a class="reference internal" href="#converting-led-blink-pattern-to-error-code">4.7.4.1.2. Converting LED Blink Pattern to Error Code</a></li>
<li><a class="reference internal" href="#examples">4.7.4.1.3. Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#timing-and-fault-clearing-issues-in-ui-indicators">4.7.5. Timing and Fault-Clearing Issues in UI Indicators</a></li>
<li><a class="reference internal" href="#implementation">4.7.6. Implementation</a><ul>
<li><a class="reference internal" href="#external-interface-errata">4.7.6.1. External interface errata</a></li>
<li><a class="reference internal" href="#modules">4.7.6.2. Modules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="supervisory.html"
                        title="previous chapter">4.6. Supervisory Algorithms</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="diagnostics.html"
                        title="next chapter">4.8. Diagnostic Kernel</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="diagnostics.html" title="4.8. Diagnostic Kernel"
             >next</a> |</li>
        <li class="right" >
          <a href="supervisory.html" title="4.6. Supervisory Algorithms"
             >previous</a> |</li>
    <li><img class="nav-logo"
             src="../_static/Microchip-Logo-Horizontal-White-Red-120x28.png" alt=""
        /></li>
    <li><a href=""></a> &#187;</li>
    <a href="../index.html">MCAF R6 RC8 (docver 6.0.2)</a> &#187;
    
          <li class="nav-item nav-item-1"><a href="index.html" >4. Components</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017-2020, Microchip Technology, Inc..
    </div>
  </body>
</html>