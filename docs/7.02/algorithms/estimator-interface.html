<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>5.4.1. Firmware Interface &#8212; MCAF R7 RC37 documentation (docver 7.0.2)</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/microchip.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mcaf_doc.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/contrib/auto-render.min.js"></script>
    <script src="../_static/rendermath.js"></script>
    <script src="../_static/svgcrop.js"></script>
    <script src="../_static/mcaf-styling.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.4.2. AN1292 Phase-locked Loop (PLL)" href="pll.html" />
    <link rel="prev" title="5.4. Position and Velocity Estimation" href="estimators.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pll.html" title="5.4.2. AN1292 Phase-locked Loop (PLL)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="estimators.html" title="5.4. Position and Velocity Estimation"
             accesskey="P">previous</a> |</li>
    <li><img class="nav-logo"
             src="../_static/Microchip-Logo-Horizontal-White-Red-120x28.png" alt=""
        /></li>
    <li><a href=""></a> &#187;</li>
    <a href="../index.html">MCAF R7 RC37 (docver 7.0.2)</a> &#187;
    
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">5. </span>Detailed Algorithm Notes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="estimators.html" accesskey="U"><span class="section-number">5.4. </span>Position and Velocity Estimation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.4.1. </span>Firmware Interface</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="firmware-interface">
<span id="algorithm-estimator-interface"></span><span id="index-0"></span><h1><span class="section-number">5.4.1. </span>Firmware Interface<a class="headerlink" href="#firmware-interface" title="Permalink to this heading">¶</a></h1>
<section id="overview">
<h2><span class="section-number">5.4.1.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>Position and velocity estimators in MCAF have several common characteristics.
This section describes their methods, types, and semantics. A fictional estimator called <code class="docutils literal notranslate"><span class="pre">Xyz</span></code>
will be used for example purposes.</p>
</section>
<section id="terminology">
<span id="algorithm-estimator-terminology"></span><h2><span class="section-number">5.4.1.2. </span>Terminology<a class="headerlink" href="#terminology" title="Permalink to this heading">¶</a></h2>
<p>The following terms are used in MCAF to describe estimators:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Term       </p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>active</p></td>
<td><p>An active estimator is in operation and determining
an angle and velocity. (All estimators that are selected
in the Customize page of motorBench<sup>®</sup> Development Suite are active by default.)</p></td>
</tr>
<tr class="row-odd"><td><p>primary</p></td>
<td><p>The primary estimator determines
the angle and velocity used for commutation and feedback.
Several estimators can be active simultaneously,
but only one can be the primary estimator
at any given instant.</p></td>
</tr>
<tr class="row-even"><td><p>intrusive</p></td>
<td><p>An intrusive estimator is one that perturbs
controller outputs with some sort of excitation
waveform, which may have a minor impact on the
motor currents and voltages.
A non-intrusive estimator determines an angle
and velocity through existing measurements of
current, voltage, or other sensors,
and does not affect operation
except through its use as a primary estimator.
Most estimators are non-intrusive.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="filesystem-location">
<h2><span class="section-number">5.4.1.3. </span>Filesystem location<a class="headerlink" href="#filesystem-location" title="Permalink to this heading">¶</a></h2>
<p>Call sites utilizing the estimators can be found in <code class="docutils literal notranslate"><span class="pre">commutation.c</span></code> and <code class="docutils literal notranslate"><span class="pre">commutation.h</span></code>; storage
is declared in <code class="docutils literal notranslate"><span class="pre">commutation_types.h</span></code>.</p>
<p>Implementation of individual estimator modules are found in the <code class="docutils literal notranslate"><span class="pre">commutation</span></code> directory.
They will typically consist of at least one .h file and one .c file,
for example <code class="docutils literal notranslate"><span class="pre">commutation/xyz.h</span></code> and <code class="docutils literal notranslate"><span class="pre">commutation/xyz.c</span></code>.
Some estimator modules set apart type definitions in a types.h file,
for example <code class="docutils literal notranslate"><span class="pre">commutation/xyz_types.h</span></code>. The estimator’s state variable structure
is defined in the types.h file, if it is present, along with inline static getter methods;
otherwise they are defined in the main .h file.
Function prototypes are declared in the main .h file.</p>
<p>Estimator-specific parameters, such as delays, limits, and tuning gains,
are generated in <code class="docutils literal notranslate"><span class="pre">parameters/xyz_params.h</span></code>.</p>
</section>
<section id="storage-and-types">
<h2><span class="section-number">5.4.1.4. </span>Storage and types<a class="headerlink" href="#storage-and-types" title="Permalink to this heading">¶</a></h2>
<p>Each estimator will have a state variable structure defined in <code class="docutils literal notranslate"><span class="pre">commutation/xyz.h</span></code>
or <code class="docutils literal notranslate"><span class="pre">commutation/xyz_types.h</span></code>, for example:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="c1">// State variable structure for use by Xyz estimator</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">tagMCAF_ESTIMATOR_XYZ</span> <span class="p">{</span>
   <span class="p">...</span>
<span class="p">}</span> <span class="n">MCAF_ESTIMATOR_XYZ_T</span><span class="p">;</span>
</pre></div>
</div>
<p>Storage for this state variable structure will be declared in <code class="docutils literal notranslate"><span class="pre">commutation_types.h</span></code>,
which typically looks like this:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Relative angle used for comparing estimator electrical angles</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">tagMCAF_RELATIVE_ANGLE_T</span>
<span class="p">{</span>
   <span class="n">MCAF_U_ANGLE_ELEC</span> <span class="n">qei</span><span class="p">;</span> <span class="cm">/** quadrature encoder with velocity tracking loop */</span>
<span class="p">}</span> <span class="n">MCAF_RELATIVE_ANGLE_T</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* State estimator data for position/velocity</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">tagMCAF_ESTIMATOR_T</span>
<span class="p">{</span>
   <span class="n">MCAF_ESTIMATOR_QEI_T</span> <span class="n">qei</span><span class="p">;</span>  <span class="cm">/** quadrature encoder with velocity tracking loop */</span>
   <span class="n">MCAF_ESTIMATOR_XYZ_T</span> <span class="n">xyz</span><span class="p">;</span>  <span class="cm">/** XYZ estimator */</span>
   <span class="n">MCAF_ESTIMATOR_INPUTS_T</span> <span class="n">inputs</span><span class="p">;</span>             <span class="cm">/** inputs common to most estimators */</span>
   <span class="n">MCAF_U_ANGLE_ELEC</span>     <span class="n">theta</span><span class="p">;</span>                   <span class="cm">/** estimated rotor angle (electrical) */</span>
   <span class="n">MCAF_U_VELOCITY_ELEC</span>  <span class="n">omega</span><span class="p">;</span>                   <span class="cm">/** estimated rotor velocity (electrical) */</span>
   <span class="n">MCAF_RELATIVE_ANGLE_T</span> <span class="n">thetaRelativeTo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">MCAF_ESTIMATOR_T</span><span class="p">;</span>

<span class="kr">inline</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">MCAF_EstimatorQeiIsActive</span><span class="p">(</span><span class="k">const</span> <span class="n">MCAF_ESTIMATOR_T</span><span class="o">*</span> <span class="n">pestimator</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">MCAF_EstimatorXyzIsActive</span><span class="p">(</span><span class="k">const</span> <span class="n">MCAF_ESTIMATOR_T</span><span class="o">*</span> <span class="n">pestimator</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">MCAF_ESTIMATOR_T</span></code> is referenced in <code class="docutils literal notranslate"><span class="pre">system_init.h</span></code> as part of the
main motor data structure, so that the Xyz estimator state variable is located
in <code class="docutils literal notranslate"><span class="pre">motor.estimator.xyz</span></code>.</p>
<p>More than one estimator may be actively operating in code generated from MCAF,
but exactly one estimator is the primary estimator used for commutation feedback.</p>
<p>The values in <code class="docutils literal notranslate"><span class="pre">motor.estimator.thetaRelativeTo</span></code> are the commutation angle
of estimators, relative to the primary estimator.
These values may be used for debugging or performance analysis,
and include all estimators that are selected as <em>reference estimators</em>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzIsActive()</span></code> function is a constant value that returns true
or false for each estimator to indicate if it is the primary estimator.</p>
<p><strong>Note:</strong> The use of “active” in the estimator firmware interface is incorrect at present.
See the <a class="reference internal" href="#estimator-interface-errata"><span class="std std-ref">Errata</span></a> for more information.</p>
</section>
<section id="entry-points-and-methods">
<h2><span class="section-number">5.4.1.5. </span>Entry points and methods<a class="headerlink" href="#entry-points-and-methods" title="Permalink to this heading">¶</a></h2>
<p>There are several entry points and methods associated with position and velocity estimators.</p>
<p>The entry points are as follows:</p>
<ul>
<li><p><strong>Initialization</strong>: <code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzInit()</span></code> is called during overall initialization.
This happens once, shortly after power-on reset, and gives the estimator a chance
to initialize its own state variables. Some estimators may depend on others, in which
case the function <code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzSetupOutputDependencies()</span></code> is also called, to provide
access from other estimator outputs.</p></li>
<li><p><strong>Reinitialization at motor start</strong>:
<code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzStartupInit()</span></code> is called whenever the <a class="reference internal" href="../components/statemach.html#component-statemachine"><span class="std std-ref">main motor state machine</span></a>
transitions into the <code class="docutils literal notranslate"><span class="pre">STARTUP</span></code> state. This gives the estimator a chance
to reinitialize its state variables at the beginning of motor startup.</p></li>
<li><p><strong>Step function</strong>:
<code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzStep()</span></code> is called at the main control rate,
from <code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code> in commutation.c.</p>
<p>Some estimators may also have other entry points, called at the same rate as the step function:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzInteractionStep()</span></code> — this contains any actions that are tightly coupled
with other MCAF modules, and has access to the full <code class="docutils literal notranslate"><span class="pre">motor</span></code> data structure. (This is
discouraged because it violates modularity, but is unavoidable in certain cases.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzStartupDelayRequested()</span></code> — this is a getter function that allows
estimators to delay startup progress at certain points, so that the estimator can complete
tasks of its own.</p></li>
</ul>
</li>
<li><p><strong>Selection of active commutation angle and velocity</strong>: In commutation.c,
<code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code> determines
the angle and velocity from among the available estimators, typically via the following construct:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">MCAF_EstimatorXyzActive</span><span class="p">(</span><span class="n">pestimator</span><span class="p">))</span>
<span class="p">{</span>
   <span class="n">pestimator</span><span class="o">-&gt;</span><span class="n">theta</span> <span class="o">=</span> <span class="n">MCAF_EstimatorXyzCommutationAngle</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pestimator</span><span class="o">-&gt;</span><span class="n">xyz</span><span class="p">);</span>
   <span class="n">pestimator</span><span class="o">-&gt;</span><span class="n">omega</span> <span class="o">=</span> <span class="n">MCAF_EstimatorXyzElectricalFrequency</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pestimator</span><span class="o">-&gt;</span><span class="n">xyz</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The compiler will optimize out blocks of this sort for inactive estimators,
where <code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzActive()</span></code> is known at compile time to be <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</li>
</ul>
<p>The following are methods associated with each estimator.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="c1">// State variable structure for use by Xyz estimator</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">tagMCAF_ESTIMATOR_XYZ</span> <span class="p">{</span>
   <span class="p">...</span>
<span class="p">}</span> <span class="n">MCAF_ESTIMATOR_XYZ_T</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Initializes Xyz state variables on reset.</span>
<span class="cm"> * @param xyz Xyz state variable structure</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">MCAF_EstimatorXyzInit</span><span class="p">(</span><span class="n">MCAF_ESTIMATOR_XYZ_T</span> <span class="o">*</span><span class="n">xyz</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Initializes Xyz state variables prior to starting motor.</span>
<span class="cm"> *</span>
<span class="cm"> * @param xyz Xyz state variable structure</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">MCAF_EstimatorXyzStartupInit</span><span class="p">(</span><span class="n">MCAF_ESTIMATOR_XYZ_T</span> <span class="o">*</span><span class="n">xyz</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Executes one control step of the Xyz estimator.</span>
<span class="cm"> *</span>
<span class="cm"> * @param xyz Xyz state variable structure</span>
<span class="cm"> * @param pinput Common input signals (e.g. stationary-frame voltage and current)</span>
<span class="cm"> * @param pmotor Motor parameters (e.g. resistance, inductance, etc.)</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">MCAF_EstimatorXyzStep</span><span class="p">(</span><span class="n">MCAF_ESTIMATOR_XYZ_T</span> <span class="o">*</span><span class="n">xyz</span><span class="p">,</span>
               <span class="k">const</span> <span class="n">MCAF_STANDARD_INPUT_SIGNALS_T</span> <span class="o">*</span><span class="n">pinput</span><span class="p">,</span>
               <span class="k">const</span> <span class="n">MCAF_MOTOR_PARAMETERS_T</span> <span class="o">*</span><span class="n">pmotor</span><span class="p">,</span>
               <span class="p">...);</span>

<span class="cm">/**</span>
<span class="cm"> * Returns commutation angle</span>
<span class="cm"> *</span>
<span class="cm"> * @param xyz state</span>
<span class="cm"> * @return commutation angle</span>
<span class="cm"> */</span>
<span class="kr">inline</span> <span class="k">static</span> <span class="n">MCAF_U_ANGLE_ELEC</span> <span class="n">MCAF_EstimatorXyzCommutationAngle</span><span class="p">(</span>
               <span class="k">const</span> <span class="n">MCAF_ESTIMATOR_XYZ_T</span> <span class="o">*</span><span class="n">xyz</span><span class="p">)</span>
               <span class="p">{</span> <span class="k">return</span> <span class="p">...</span> <span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Returns electrical frequency</span>
<span class="cm"> *</span>
<span class="cm"> * @param xyz state</span>
<span class="cm"> * @return electrical frequency</span>
<span class="cm"> */</span>
<span class="kr">inline</span> <span class="k">static</span> <span class="n">MCAF_U_VELOCITY_ELEC</span> <span class="n">MCAF_EstimatorXyzElectricalFrequency</span><span class="p">(</span>
               <span class="k">const</span> <span class="n">MCAF_ESTIMATOR_XYZ_T</span> <span class="o">*</span><span class="n">xyz</span><span class="p">)</span>
               <span class="p">{</span> <span class="k">return</span> <span class="p">...</span> <span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Determine whether startup delay is requested</span>
<span class="cm"> *</span>
<span class="cm"> * @param xyz state</span>
<span class="cm"> * @param startupStatus startup status</span>
<span class="cm"> * @return whether a startup delay is requested</span>
<span class="cm"> */</span>
<span class="kr">inline</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">MCAF_EstimatorXyzStartupDelayRequested</span><span class="p">(</span>
               <span class="k">const</span> <span class="n">MCAF_ESTIMATOR_XYZ_T</span> <span class="o">*</span><span class="n">xyz</span><span class="p">,</span> <span class="n">MCAF_STARTUP_STATUS_T</span> <span class="n">startupStatus</span><span class="p">)</span>
               <span class="p">{</span> <span class="k">return</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="method-summary">
<h2><span class="section-number">5.4.1.6. </span>Method summary<a class="headerlink" href="#method-summary" title="Permalink to this heading">¶</a></h2>
<p>These methods are summarized in the following table.
(To save space, the prefix <code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyz</span></code> is elided, so for example <code class="docutils literal notranslate"><span class="pre">Init()</span></code> refers to <code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzInit()</span></code>)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Summary</p></th>
<th class="head"><p>Call site</p></th>
<th class="head"><p>Applicability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Init()</span></code></p></td>
<td><p>One-time initialization</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationInit()</span></code></p></td>
<td><p>all</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SetupOutputDependencies()</span></code></p></td>
<td><p>One-time initialization for output
dependencies</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationInit()</span></code></p></td>
<td><p>Hybrid
estimators</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">StartupInit()</span></code></p></td>
<td><p>Reinitialization at each startup</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStartupInit()</span></code></p></td>
<td><p>all</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Step()</span></code></p></td>
<td><p>Step update function</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code></p></td>
<td><p>all</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">InteractionStep()</span></code></p></td>
<td><p>Secondary update function;
needed only when tightly coupled
to other modules</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code></p></td>
<td><p>as needed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CommutationAngle()</span></code></p></td>
<td><p>Getter, returns commutation angle</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code></p></td>
<td><p>all</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ElectricalFrequency()</span></code></p></td>
<td><p>Getter, returns electrical
frequency</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code></p></td>
<td><p>all</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">StartupDelayRequested()</span></code></p></td>
<td><p>Getter, returns whether a delay
is requested.</p>
<p>Estimator may delay startup progress
at certain points, by returning
<code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code></p></td>
<td><p>all</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Active()</span></code></p></td>
<td><p>Getter, returns true if estimator
angle is the primary estimator
selected for commutation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MCAF_CommutationStep()</span></code></p></td>
<td><p>all</p></td>
</tr>
</tbody>
</table>
</section>
<section id="errata">
<span id="estimator-interface-errata"></span><h2><span class="section-number">5.4.1.7. </span>Errata<a class="headerlink" href="#errata" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Use of “active” instead of “primary” (DB_MC-4325; Applicability: MCAF R4, R5, R6, R7)
— the word “active” is used incorrectly in commutation.c and commutation_types.h
and this will be fixed to “primary” in a future release, including changing
<code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzIsActive()</span></code> to <code class="docutils literal notranslate"><span class="pre">MCAF_EstimatorXyzIsPrimary()</span></code>.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">5.4.1. Firmware Interface</a><ul>
<li><a class="reference internal" href="#overview">5.4.1.1. Overview</a></li>
<li><a class="reference internal" href="#terminology">5.4.1.2. Terminology</a></li>
<li><a class="reference internal" href="#filesystem-location">5.4.1.3. Filesystem location</a></li>
<li><a class="reference internal" href="#storage-and-types">5.4.1.4. Storage and types</a></li>
<li><a class="reference internal" href="#entry-points-and-methods">5.4.1.5. Entry points and methods</a></li>
<li><a class="reference internal" href="#method-summary">5.4.1.6. Method summary</a></li>
<li><a class="reference internal" href="#errata">5.4.1.7. Errata</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="estimators.html"
                          title="previous chapter"><span class="section-number">5.4. </span>Position and Velocity Estimation</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="pll.html"
                          title="next chapter"><span class="section-number">5.4.2. </span>AN1292 Phase-locked Loop (PLL)</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pll.html" title="5.4.2. AN1292 Phase-locked Loop (PLL)"
             >next</a> |</li>
        <li class="right" >
          <a href="estimators.html" title="5.4. Position and Velocity Estimation"
             >previous</a> |</li>
    <li><img class="nav-logo"
             src="../_static/Microchip-Logo-Horizontal-White-Red-120x28.png" alt=""
        /></li>
    <li><a href=""></a> &#187;</li>
    <a href="../index.html">MCAF R7 RC37 (docver 7.0.2)</a> &#187;
    
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">5. </span>Detailed Algorithm Notes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="estimators.html" ><span class="section-number">5.4. </span>Position and Velocity Estimation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.4.1. </span>Firmware Interface</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017-2023, Microchip Technology, Inc..
    </div>
  </body>
</html>